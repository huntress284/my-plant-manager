extends default

block content

    //  submit new plant functionality
    h3 Add Plant
    //form(method='POST', action="http://localhost:3001/api/plants")
    //    input(type='text', name='plantName')
    //    input(type='submit')

    //script.
        // async function get_info(x) {
        //     console.clear();
        //     x.toString();
        //     const val = x;
        //     // PLANT DETAILS
        //     const url = "https://perenual.com/api/species/details/" + x + "?key=sk-8k2463e99f604d8a438";
        //     const options = {
        //         method: 'GET'
        //     };
        //
        //     const response = await fetch(url, options);
        //     const json = await response.json();
        //
        //     // TODO: array of elements
        //     const common_name = json.common_name;
        //     const scientific_name = json.scientific_name;
        //     const propagation = json.propagation;
        //     const watering = json.watering;
        //     const image = json.default_image.small_url;

            // console.log(propagation);
            // const replacementPic = document.querySelector(`[value= "${x}"]`);
            // replacementPic.setAttribute("src", image);

            // const toolWater = bootstrap.Tooltip.getInstance(`[data-watering= "${x}"]`);
            // toolWater.setContent({'.tooltip-inner': watering});

            // const toolProp = bootstrap.Tooltip.getInstance(`[data-propagation= "${x}"]`);
            // for (let i = 0; i < 3; ++i){
            //     toolProp.setContent({'.tooltip-inner': propagation[i]});
            // }


            //
            // const hehe = document.querySelector(`[data-id= "${x}"]`);
            // hehe.textContent = JSON.stringify("Common Name: " + common_name);
            // hehe.append("Scientific name: " + scientific_name);
            // hehe.append("Propagation Methods: " + propagation);
        }

    h3 Delete Plant - in progress
    form(method='DELETE', action="http://localhost:3001/api/plants")
        input(type='text', name='toDelete')
        input(type='submit')

    script.

        async function searchPlant() {

            // TODO : add variable so search works
            var x = document.getElementById("mySearch").value;
            console.log("search value: " + x);
            // document.getElementById("demo").innerHTML = "Plant searched: " + x;

            const url = "https://perenual.com/api/species-list?key=sk-8k2463e99f604d8a438&q=" + x;

            const options = {
                method: 'GET'
            };

            const response = await fetch(url, options);

            const json = await response.json();

            const body = JSON.stringify(json);

            // console.log(json.data[0].common_name); // swiss chz plant example

            console.log("Total plants returned: " + json.total);
            document.getElementById('total').innerHTML = "Total Number: " + json.total;

            for (let i = 0; i < json.total; i++) {
                console.log(json.data[i].common_name + i);
                document.getElementById('demo').append(JSON.stringify("[" + " ID: " + json.data[i].id + " Common Name: " + json.data[i].common_name) + "],");
            }

        }



    h4#total
    p#demo

    h3 Plants in Database
    .row.row-cols-2.row-cols-md-4.g-4
        each plant of plants

            .col
                // specific ID for each card?
                .card
                    //title Placeholder
                    img#plant(src='/static/images/' + plant[1] + '.jpg', value=`${plant[0]}` alt='No picture yet!')

                    .card-body
                        h5.card-title= 'Plant Name: ' + plant[1]

                        p.card-text
                            #commonName(data-id=`${plant[0]}`)

                                script.
                                    (() => {
                                        'use strict'
                                        // --------
                                        // Tooltips
                                        // --------
                                        document.querySelectorAll('[data-bs-toggle="tooltip"]')
                                            .forEach(tooltip => {
                                                new bootstrap.Tooltip(tooltip)
                                            })
                                    })()

                            button.btn.btn-secondary.m-1#sunlight(data-sunlight=`${plant[0]}`, type='button', data-bs-toggle='tooltip', data-bs-placement='right', data-bs-title='...')
                                svg(xmlns='http://www.w3.org/2000/svg', viewbox='0 0 512 512', width='25', height='25')
                                    path(d='M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z')

                            button.btn.btn-secondary.m-1#propagation(data-propagation=`${plant[0]}`, type='button', data-bs-toggle='tooltip', data-bs-placement='right', data-bs-title='...')
                                svg(xmlns='http://www.w3.org/2000/svg', viewbox='0 0 512 512', width='25', height='25')
                                    path(d='M512 32c0 113.6-84.6 207.5-194.2 222c-7.1-53.4-30.6-101.6-65.3-139.3C290.8 46.3 364 0 448 0h32c17.7 0 32 14.3 32 32zM0 96C0 78.3 14.3 64 32 64H64c123.7 0 224 100.3 224 224v32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V320C100.3 320 0 219.7 0 96z')

                            button.btn.btn-secondary.m-1#watering(data-watering=`${plant[0]}`, type='button', data-bs-toggle='tooltip', data-bs-placement='right', data-bs-title='...')
                                svg(xmlns='http://www.w3.org/2000/svg', viewbox='0 0 384 512', width='25', height='25')
                                    path(d='M192 512C86 512 0 426 0 320C0 228.8 130.2 57.7 166.6 11.7C172.6 4.2 181.5 0 191.1 0h1.8c9.6 0 18.5 4.2 24.5 11.7C253.8 57.7 384 228.8 384 320c0 106-86 192-192 192zM96 336c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 61.9 50.1 112 112 112c8.8 0 16-7.2 16-16s-7.2-16-16-16c-44.2 0-80-35.8-80-80z')


                        button.btn.btn-secondary(onclick=`get_info(${plant[0]})`) More info



